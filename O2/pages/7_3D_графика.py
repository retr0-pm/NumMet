import streamlit as st
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D  # –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è 3D-–≥—Ä–∞—Ñ–∏–∫–æ–≤

st.set_page_config(page_title="3D –≥—Ä–∞—Ñ–∏–∫–∞ –≤ Matplotlib", layout="wide")

menu = st.sidebar.radio("***",
    (
    "–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ 3D –≥—Ä–∞—Ñ–∏–∫–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏",
    "–ê–∫—Ç–∏–≤–∞—Ü–∏—è 3D",
    "–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (3D surfaces)",
    "–°–µ—Ç–∫–∏",
    "–¢–æ—á–µ—á–Ω—ã–µ 3D –≥—Ä–∞—Ñ–∏–∫–∏",
    "–õ–∏–Ω–µ–π–Ω—ã–µ 3D –≥—Ä–∞—Ñ–∏–∫–∏",
    "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ 3D —Å—Ü–µ–Ω",
    )
)

# -------------------- –î–õ–Ø –ß–ï–ì–û –ù–£–ñ–ù–ê 3D --------------------
if menu == "–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ 3D –≥—Ä–∞—Ñ–∏–∫–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏":
    st.markdown("""
    #### üéØ –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ 3D –≥—Ä–∞—Ñ–∏–∫–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏

    * –¢—Ä—ë—Ö–º–µ—Ä–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å—è—Ç **–æ—Ç –¥–≤—É—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—Ä–∞–∂–µ–Ω –∫–∞–∫ —Ç—Ä–µ—Ç—å—è ‚Äî \( z = f(x, y) \).
    * –¢–∞–∫–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç:
        - –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—ã –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π –∏ —ç–∫—Å—Ç—Ä–µ–º—É–º—ã —Ñ—É–Ω–∫—Ü–∏–∏;
        - –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—ã, –¥–∞–≤–ª–µ–Ω–∏—è, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã);
        - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ –∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è;
        - –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –Ω–∞–≥–ª—è–¥–Ω–æ–º –≤–∏–¥–µ.
    * –í `Matplotlib` —Ç—Ä—ë—Ö–º–µ—Ä–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å—Ç—Ä–æ—è—Ç—Å—è —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `mpl_toolkits.mplot3d`.
    """)

    # –ù–µ–±–æ–ª—å—à–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
    x = np.linspace(-3, 3, 50)
    y = np.linspace(-3, 3, 50)
    X, Y = np.meshgrid(x, y)
    Z = np.sin(np.sqrt(X**2 + Y**2))

    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    surf = ax.plot_surface(X, Y, Z, cmap='viridis', edgecolor='none')
    ax.set_title("–ü—Ä–∏–º–µ—Ä —Ç—Ä—ë—Ö–º–µ—Ä–Ω–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ z = sin(‚àö(x¬≤ + y¬≤))")
    plt.colorbar(surf, ax=ax, shrink=0.6, pad=0.1)
    st.pyplot(fig)

# -------------------- –ê–ö–¢–ò–í–ê–¶–ò–Ø 3D --------------------
if menu == "–ê–∫—Ç–∏–≤–∞—Ü–∏—è 3D":
    st.markdown("""
    #### üß© –ê–∫—Ç–∏–≤–∞—Ü–∏—è 3D-–≥—Ä–∞—Ñ–∏–∫–∏

    * –î–ª—è —Ä–∞–±–æ—Ç—ã —Å 3D-–≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –≤ Matplotlib –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –æ—Å—å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `projection='3d'`.
    * –≠—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –º–æ–¥—É–ª—å **mpl_toolkits.mplot3d**, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è 3D –æ–±—ä–µ–∫—Ç–æ–≤.
    * –ü—Ä–∏–º–µ—Ä:
    ```python
    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    ```
    * –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã `plot_surface`, `scatter`, `plot_wireframe` –∏ –¥—Ä.
    """)

    st.code("""
    from mpl_toolkits.mplot3d import Axes3D
    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    """, language="python")

    st.info("–û—Å—å —Å –ø—Ä–æ–µ–∫—Ü–∏–µ–π '3d' —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —Ç—Ä—ë—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω—ã—Ö –æ—Å–µ–π X, Y, Z.")

# -------------------- –ü–û–í–ï–†–•–ù–û–°–¢–ò --------------------
if menu == "–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (3D surfaces)":
    st.markdown("""
    #### üèî –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ (3D Surfaces)

    * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π** –¥–≤—É—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: *z = f(x, y)*.
    * –¶–≤–µ—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ (colormap) –ø–æ–º–æ–≥–∞–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –≤—ã—Å–æ—Ç–µ.
    * –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî `ax.plot_surface(X, Y, Z, cmap='...')`.
    """)

    x = np.linspace(-4, 4, 100)
    y = np.linspace(-4, 4, 100)
    X, Y = np.meshgrid(x, y)
    Z = np.cos(np.sqrt(X**2 + Y**2))

    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    surf = ax.plot_surface(X, Y, Z, cmap='coolwarm', edgecolor='none')
    ax.set_title("–ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å z = cos(‚àö(x¬≤ + y¬≤))")
    plt.colorbar(surf, ax=ax, shrink=0.6, pad=0.1)
    st.pyplot(fig)

# -------------------- –°–ï–¢–ö–ò --------------------
if menu == "–°–µ—Ç–∫–∏":
    st.markdown("""
    #### üï∏ –°–µ—Ç–∫–∏ (Wireframes)

    * –°–µ—Ç–∫–∏ ‚Äî –æ–±–ª–µ–≥—á—ë–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π —Ç–æ–ª—å–∫–æ **–∫–∞—Ä–∫–∞—Å** –≥—Ä–∞—Ñ–∏–∫–∞.
    * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Ñ–æ—Ä–º—ã —Ñ—É–Ω–∫—Ü–∏–∏.
    * –§—É–Ω–∫—Ü–∏—è: `ax.plot_wireframe(X, Y, Z, color='...')`
    """)

    x = np.linspace(-5, 5, 40)
    y = np.linspace(-5, 5, 40)
    X, Y = np.meshgrid(x, y)
    Z = np.sin(np.sqrt(X**2 + Y**2))

    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    ax.plot_wireframe(X, Y, Z, color='navy', linewidth=0.7)
    ax.set_title("–ö–∞—Ä–∫–∞—Å —Ñ—É–Ω–∫—Ü–∏–∏ z = sin(‚àö(x¬≤ + y¬≤))")
    st.pyplot(fig)

# -------------------- –¢–û–ß–ï–ß–ù–´–ï 3D --------------------
if menu == "–¢–æ—á–µ—á–Ω—ã–µ 3D –≥—Ä–∞—Ñ–∏–∫–∏":
    st.markdown("""
    #### üí† –¢–æ—á–µ—á–Ω—ã–µ 3D –≥—Ä–∞—Ñ–∏–∫–∏

    * –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç –Ω–∞–±–æ—Ä —Ç–æ—á–µ–∫ –≤ —Ç—Ä—ë—Ö–º–µ—Ä–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ.
    * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±–ª–∞–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
    * –§—É–Ω–∫—Ü–∏—è: `ax.scatter(x, y, z, ...)`.
    """)

    np.random.seed(0)
    x = np.random.randn(200)
    y = np.random.randn(200)
    z = np.random.randn(200)

    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    sc = ax.scatter(x, y, z, c=z, cmap='plasma', alpha=0.8)
    plt.colorbar(sc, ax=ax, shrink=0.6, pad=0.1, label='z')
    ax.set_title("3D —Ç–æ—á–µ—á–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ (scatter3D)")
    st.pyplot(fig)

# -------------------- –õ–ò–ù–ï–ô–ù–´–ï 3D --------------------
if menu == "–õ–∏–Ω–µ–π–Ω—ã–µ 3D –≥—Ä–∞—Ñ–∏–∫–∏":
    st.markdown("""
    #### üìà –õ–∏–Ω–µ–π–Ω—ã–µ 3D –≥—Ä–∞—Ñ–∏–∫–∏

    * –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π.
    * –ö–∞–∂–¥–∞—è –ª–∏–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Ç–æ—á–µ–∫ (x, y, z).
    * –§—É–Ω–∫—Ü–∏—è: `ax.plot3D(x, y, z, ...)`.
    """)

    theta = np.linspace(-4 * np.pi, 4 * np.pi, 200)
    z = np.linspace(-2, 2, 200)
    r = z**2 + 1
    x = r * np.sin(theta)
    y = r * np.cos(theta)

    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    ax.plot3D(x, y, z, color='darkorange', linewidth=2)
    ax.set_title("–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∫—Ä–∏–≤–∞—è")
    st.pyplot(fig)

# -------------------- –û–§–û–†–ú–õ–ï–ù–ò–ï --------------------
if menu == "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ 3D —Å—Ü–µ–Ω":
    st.markdown("""
    #### üé® –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ 3D —Å—Ü–µ–Ω

    * 3D –≥—Ä–∞—Ñ–∏–∫–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ 2D:
        - –ò–∑–º–µ–Ω—è—Ç—å —É–≥–ª—ã –æ–±–∑–æ—Ä–∞ (`view_init`).
        - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∏ –∏ —Å–µ—Ç–∫—É.
        - –ò–∑–º–µ–Ω—è—Ç—å –º–∞—Å—à—Ç–∞–± –∏ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –æ—Å–µ–π.
    * –£–≥–ª—ã –æ–±–∑–æ—Ä–∞ –∑–∞–¥–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `elev` (–≤—ã—Å–æ—Ç–∞) –∏ `azim` (–∞–∑–∏–º—É—Ç).
    """)

    x = np.linspace(-3, 3, 100)
    y = np.linspace(-3, 3, 100)
    X, Y = np.meshgrid(x, y)
    Z = np.sin(X) * np.cos(Y)

    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    ax.plot_surface(X, Y, Z, cmap='viridis', edgecolor='none')
    ax.view_init(elev=40, azim=45)
    ax.set_xlabel("X")
    ax.set_ylabel("Y")
    ax.set_zlabel("Z")
    ax.set_title("–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è 3D —Å—Ü–µ–Ω–∞")
    st.pyplot(fig)
